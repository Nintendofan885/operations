#   -------------------------------------------------------------
#   Eglide â€” nginx configuration
#   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
#   Project:        Eglide
#   Created:        2016-07-26
#   License:        Trivial work, not eligible to copyright
#   Source file:    roles/shellserver/web-hosting/files/eglide/nginx/vhosts/000.conf
#   -------------------------------------------------------------
#
#   <auto-generated>
#       This file is managed by our rOPS SaltStack repository.
#
#       Changes to this file may cause incorrect behavior
#       and will be lost if the state is redeployed.
#   </auto-generated>

#   -------------------------------------------------------------
#   Default vhost as a catchall when Host: header value doesn't
#   match any server name, ie the domain is unknown.
#   -------------------------------------------------------------

    server {
        listen          80;
        listen          [2001:470:1f12:9e1::2]:80;
        listen          [2001:470:1f13:9e1:0:c0ff:ee:1]:80;
        server_name     _;
        root            /var/wwwroot/unknown_domains;

        access_log      /var/log/www/unknown_domains-access.log main;
        error_log       /var/log/www/unknown_domains-error.log;

        error_page 404 @unknowndomains;

        location / {
            return 404;
        }

        location @unknowndomains {
            rewrite ^(.*)$ /unknown.html break;
        }
    }
